<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Agora</title>
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
    <link rel="icon" type="image/png" href="https://png.icons8.com/metro/1600/cinema.png">
    <%= csrf_meta_tags %>
    <%= action_cable_meta_tag %>
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%#= stylesheet_pack_tag 'application', media: 'all' %> <!-- Uncomment if you import CSS in app/javascript/packs/application.js -->
  </head>
  <body class="<%= params[:controller] %> <%= params[:action] %>">
    <%= render 'shared/navbar' %>
    <%= render 'shared/flashes' %>
    <%= yield %>
    <%= javascript_include_tag 'application' %>
    <%= javascript_pack_tag 'application' %>

    <script>

      /* Light YouTube Embeds by @labnol */
      /* Web: http://labnol.org/?p=27941 */

      document.addEventListener("DOMContentLoaded",
          function() {
              var div, n,
                  v = document.getElementsByClassName("youtube-player");
              for (n = 0; n < v.length; n++) {
                  div = document.createElement("div");
                  div.setAttribute("data-id", v[n].dataset.id);
                  div.innerHTML = labnolThumb(v[n].dataset.id);
                  div.onclick = labnolIframe;
                  v[n].appendChild(div);
              }
          });

      function labnolThumb(id) {
          var thumb = '<img src="https://i.ytimg.com/vi/ID/hqdefault.jpg">',
              play = '<div class="play"></div>';
          return thumb.replace("ID", id) + play;
      }

      function labnolIframe() {
          var iframe = document.createElement("iframe");
          var embed = "https://www.youtube.com/embed/ID?controls=1&showinfo=0&rel=0&autoplay=1&loop=1&showinfo=0&autohide=1";
          iframe.setAttribute("src", embed.replace("ID", this.dataset.id));
          iframe.setAttribute("frameborder", "0");
          iframe.setAttribute("allowfullscreen", "1");
          this.parentNode.replaceChild(iframe, this);
        }

    </script>
  </body>
</html>
